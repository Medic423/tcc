// Center Database Schema (Port 5434)
generator client {
  provider = "prisma-client-js"
  output   = "../node_modules/.prisma/center"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL_CENTER")
}

model CenterUser {
  id        String   @id @default(cuid())
  email     String   @unique
  password  String
  name      String
  userType  String   // ADMIN
  isActive  Boolean  @default(true)
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  @@map("center_users")
}

model Hospital {
  id             String   @id @default(cuid())
  name           String
  address        String
  city           String
  state          String
  zipCode        String
  phone          String?
  email          String?
  type           String
  capabilities   String[]
  region         String
  coordinates    Json?
  operatingHours String?
  isActive       Boolean  @default(true)
  requiresReview Boolean  @default(false)
  approvedAt     DateTime?
  approvedBy     String?
  createdAt      DateTime @default(now())
  updatedAt      DateTime @updatedAt

  @@map("hospitals")
}

model EMSAgency {
  id             String   @id @default(cuid())
  name           String
  contactName    String
  phone          String
  email          String
  address        String
  city           String
  state          String
  zipCode        String
  serviceArea    String[]
  operatingHours Json?
  capabilities   String[]
  pricingStructure Json?
  isActive       Boolean  @default(true)
  status         String   @default("ACTIVE")
  requiresReview Boolean  @default(false)
  approvedAt     DateTime?
  approvedBy     String?
  createdAt      DateTime @default(now())
  updatedAt      DateTime @updatedAt

  @@map("ems_agencies")
}

model Trip {
  id                String    @id @default(cuid())
  tripNumber        String    @unique
  patientName       String
  fromLocation      String
  toLocation        String
  scheduledTime     DateTime
  actualStartTime   DateTime?
  actualEndTime     DateTime?
  status            String
  priority          String
  notes             String?
  assignedTo        String?
  assignedAgencyId  String?
  assignedUnitId    String?
  acceptedTimestamp DateTime?
  pickupTimestamp   DateTime?
  completionTimestamp DateTime?
  createdAt         DateTime  @default(now())
  updatedAt         DateTime  @updatedAt

  @@map("trips")
}

model SystemAnalytics {
  id          String   @id @default(cuid())
  metricName  String
  metricValue Json
  timestamp   DateTime @default(now())
  createdAt   DateTime @default(now())
  userId      String?

  @@map("system_analytics")
}
